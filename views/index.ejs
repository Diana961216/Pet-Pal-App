<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="/stylesheets/home.css" />
    <title>Home Page</title>
  </head>
  <body>
    <%- include('partials/_navbar') %>

    <div class="landing-container">
      <% if (!user) { %>
      <h1>Welcome to PetPal!</h1>
      <p>Your place to find and adopt loving pets.</p>
      <% } else { %>
      <h1>Welcome back, <%= user.name %>!</h1>
      <p>Ready to explore new pets today?</p>
      <a href="/pets" class="btn">View Pets</a>
      <a href="/users/<%= user._id %>" class="btn secondary-btn"
        >Your Profile</a
      >
      <% } %>
    </div>

    <h2 class="adopt">Adoptable Pets Near You</h2>
    <div class="scroll-wrapper">
      <button
        class="scroll-btn left"
        onmouseenter="startScroll(-1)"
        onmouseleave="stopScroll()"
      >
        &#8592;
      </button>
      <div class="scroll-container">
        <ul>
          <% pets.forEach(pet => { %>
          <li>
            <strong><%= pet.name %></strong>
            (<%= pet.breeds.primary %>, <%= pet.age %>, <%= pet.gender %>) <% if
            (pet.photos && pet.photos.length > 0) { %>
            <br />
            <img src="<%= pet.photos[0].medium %>" alt="<%= pet.name %>" />
            <% } %>
          </li>
          <% }) %>
        </ul>
      </div>
      <button
        class="scroll-btn right"
        onmouseenter="startScroll(1)"
        onmouseleave="stopScroll()"
      >
        &#8594;
      </button>
    </div>

    <script>
      let scrollInterval;

      function startScroll(direction) {
        const container = document.querySelector(".scroll-container");
        stopScroll(); // clear any previous interval
        scrollInterval = setInterval(() => {
          container.scrollBy({ left: direction * 5 }); // speed here
        }, 10); // delay between scrolls
      }

      function stopScroll() {
        clearInterval(scrollInterval);
      }
    </script>
  </body>
</html>
