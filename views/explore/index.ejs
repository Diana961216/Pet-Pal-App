<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
    rel="stylesheet"
  />
  <link rel="stylesheet" href="/stylesheets/explore.css">
  <title>Explore Adoptable Pets</title>
</head>
<body>
  <%- include('../partials/_navbar') %>

  <div class="landing-container">
    <h1>Explore Adoptable Pets</h1>
    <form class="filter-form" action="/explore" method="GET">
      <div class="form-group">
        <label for="location">Location:</label>
        <input
          type="text"
          id="location"
          name="location"
          placeholder="e.g. Miami, FL"
          value="<%= typeof location !== 'undefined' ? location : '' %>"
        />
      </div>

      <div class="form-group">
        <label for="type">Type of pet:</label>
        <select id="type" name="type">
          <option value="">Any</option>
          <option value="dog" <%= type==='dog' ? 'selected' : '' %>>Dog</option>
          <option value="cat" <%= type==='cat' ? 'selected' : '' %>>Cat</option>
          <option value="rabbit" <%= type==='rabbit' ? 'selected' : '' %>>Rabbit</option>
        </select>
      </div>

      <button type="submit" class="btn">Search</button>
    </form>
  </div>

  <% if (pets && pets.length > 0) { %>
    <div class="scroll-container" style="display:flex; flex-wrap:wrap; justify-content:center; gap:1rem; padding:2rem;">
      <% pets.forEach(pet => { %>
        <div style="background:white; border:1px solid #A9BCD0; border-radius:8px; padding:1rem; max-width:300px; text-align:center;">
          <strong><%= pet.name %></strong><br>
          (<%= pet.breeds.primary %>, <%= pet.age %>, <%= pet.gender %>)
          <% if (pet.photos && pet.photos.length > 0) { %>
            <br><img src="<%= pet.photos[0].medium %>" alt="<%= pet.name %>" style="width:100%; height:200px; object-fit:cover; border-radius:8px;">
          <% } %>
        </div>
      <% }) %>
    </div>
  <% } else { %>
    <p style="text-align:center; padding:2rem;">No pets found. Try another search!</p>
  <% } %>
</body>
</html>

